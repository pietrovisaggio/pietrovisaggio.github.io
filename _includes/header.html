
{%- assign show_title = false -%}
{%- if page.show_title == true
   or page.layout == 'cv'
   or page.permalink == '/cv/'
   or page.permalink == '/research/' -%}
  {%- assign show_title = true -%}
{%- endif -%}

<header class="site-header{% if show_title %} show-title{% endif %}" role="banner">
  <div class="wrapper">
    <a class="site-title" href="{{ '/' | relative_url }}">
      {{ page.title | default: site.title }}
    </a>

    <!-- right side: links + sun together -->
    <div class="nav-group">
      <nav class="site-nav">
        <a class="page-link" href="{{ '/' | relative_url }}">About</a>
        <a class="page-link" href="{{ '/Research/' | relative_url }}">Research</a>
        <a class="page-link" href="{{ '/cv/' | relative_url }}">CV</a>
      </nav>

      <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
        <span class="icon">ðŸŒž</span>
      </button>    <!-- MOBILE: hamburger -->

      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger" class="hamburger" aria-label="Apri/chiudi menu" aria-controls="mobile-menu">
          <span></span><span></span><span></span>
        </label>
      </div>

      <!-- MOBILE dropdown panel -->
      <!-- Mobile toggle + Nav -->
    <div class="nav-and-toggle">
      <!-- hidden checkbox controls menu state -->
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <!-- the hamburger button -->
      <label for="nav-trigger" class="nav-toggle" aria-label="Toggle menu" aria-controls="site-menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </label>

      <nav id="site-menu" class="site-nav" aria-label="Primary">
        <a class="page-link" href="{{ '/' | relative_url }}">About</a>
        <a class="page-link" href="{{ '/Research/' | relative_url }}">Research</a>
        <a class="page-link" href="{{ '/cv/' | relative_url }}">CV</a>

        <!-- theme toggle lives inside nav so it drops down on mobile -->
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
          <span class="icon">ðŸŒ™</span>
        </button>
      </nav>
    </div>

    </div>
  </div>
</header>